<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AI Image Analysis - CivicOne</title>
  <style>
    *{margin:0;padding:0;box-sizing:border-box;}
    body{font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;background:#f5f7fa;color:#222;}

    .navbar {
      background: linear-gradient(135deg,#667eea 0%,#764ba2 100%);
      color:white;
      padding:20px 40px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      box-shadow:0 2px 10px rgba(0,0,0,0.1);
    }
    .navbar-brand{font-size:1.8em;font-weight:700;}
    .navbar-menu{display:flex;gap:30px;align-items:center;}
    .navbar-menu a{color:white;text-decoration:none;font-weight:500;transition:opacity 0.3s;}
    .navbar-menu a:hover{opacity:0.8;}

    .container{max-width:800px;margin:40px auto;padding:0 20px;}
    .upload-container{background:white;border-radius:15px;padding:60px 40px;box-shadow:0 2px 10px rgba(0,0,0,0.05);text-align:center;}
    .upload-header{margin-bottom:40px;}
    .upload-header .icon{font-size:5em;margin-bottom:20px;}
    .upload-header h1{color:#333;margin-bottom:15px;font-size:2.5em;}
    .upload-header p{color:#666;font-size:1.1em;line-height:1.6;}

    .upload-zone{border:3px dashed #667eea;border-radius:15px;padding:60px 40px;background:#f8f9fa;margin-bottom:30px;cursor:pointer;transition:all 0.3s;}
    .upload-zone:hover{background:#e3f2fd;border-color:#764ba2;}
    .upload-zone.dragover{background:#e3f2fd;border-color:#764ba2;transform:scale(1.02);}
    .upload-zone .icon{font-size:4em;margin-bottom:20px;display:block;}
    .upload-zone h3{color:#333;margin-bottom:10px;font-size:1.3em;}
    .upload-zone p{color:#666;}
    #file{display:none;}

    .btn{padding:16px 40px;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white;border:none;border-radius:10px;font-size:1.1em;font-weight:600;cursor:pointer;transition:transform 0.2s, box-shadow 0.2s;}
    .btn:hover{transform:translateY(-2px);box-shadow:0 10px 20px rgba(102,126,234,0.3);}
    .btn:disabled{opacity:0.5;cursor:not-allowed;}

    .preview-container{display:none;margin-top:30px;padding:20px;background:#f8f9fa;border-radius:10px;}
    .preview-container img{max-width:100%;max-height:400px;border-radius:10px;margin-bottom:20px;}

    .feature-list{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin-top:40px;text-align:left;}
    .feature-card{padding:25px;background:#f8f9fa;border-radius:10px;border-left:4px solid #667eea;}
    .feature-card .icon{font-size:2.5em;margin-bottom:15px;display:block;}
    .feature-card h3{color:#333;margin-bottom:10px;font-size:1.1em;}
    .feature-card p{color:#666;font-size:0.95em;line-height:1.6;}

    @media(max-width:768px){
      .navbar{flex-direction:column;gap:20px;}
      .navbar-menu{flex-direction:column;gap:15px;}
      .upload-container{padding:40px 25px;}
      .upload-zone{padding:40px 20px;}
      .upload-header h1{font-size:2em;}
    }
  </style>
</head>
<body>
  <nav class="navbar">
    <div class="navbar-brand">üèõÔ∏è CivicOne</div>
    <div class="navbar-menu">
      <a href="/dashboard">Dashboard</a>
      <a href="/issues">View Issues</a>
      <a href="/issues/new">Report Issue</a>
      <a href="/upload">AI Analysis</a>
      <a href="/ai">AI Assistant</a>
      <a href="/account">My Account</a>
    </div>
  </nav>

  <div class="container">
    <div class="upload-container">
      <div class="upload-header">
        <div class="icon">ü§ñ</div>
        <h1>AI Image Analysis</h1>
        <p>Upload an image of a civic issue and our AI will analyze it to provide insights and categorization</p>
      </div>

      <form action="/upload" method="POST" enctype="multipart/form-data" id="uploadForm">
        <label for="file">
          <div class="upload-zone" id="dropZone">
            <span class="icon">üì∏</span>
            <h3>Click to upload or drag and drop</h3>
            <p>Supported formats: JPEG, PNG, GIF (Max 5MB)</p>
          </div>
        </label>
        <input type="file" name="file" id="file" accept="image/*" required>

        <div class="preview-container" id="previewContainer">
          <img id="preview" src="" alt="Preview">
          <p id="fileName"></p>
        </div>

        <button type="submit" class="btn" id="submitBtn" disabled>üîç Analyze Image</button>
      </form>

      <div class="feature-list">
        <div class="feature-card">
          <span class="icon">üéØ</span>
          <h3>Smart Detection</h3>
          <p>Automatically identifies issue types like potholes, waste, infrastructure damage</p>
        </div>
        <div class="feature-card">
          <span class="icon">üìä</span>
          <h3>Severity Assessment</h3>
          <p>AI evaluates the urgency and impact of the reported issue</p>
        </div>
        <div class="feature-card">
          <span class="icon">üí°</span>
          <h3>Recommendations</h3>
          <p>Get suggested actions and relevant department routing</p>
        </div>
      </div>
    </div>
  </div>

  <script>
    const fileInput = document.getElementById('file');
    const dropZone = document.getElementById('dropZone');
    const previewContainer = document.getElementById('previewContainer');
    const preview = document.getElementById('preview');
    const fileName = document.getElementById('fileName');
    const submitBtn = document.getElementById('submitBtn');

    fileInput.addEventListener('change', handleFileSelect);
    dropZone.addEventListener('click', () => fileInput.click());

    dropZone.addEventListener('dragover', (e) => {
      e.preventDefault();
      dropZone.classList.add('dragover');
    });

    dropZone.addEventListener('dragleave', () => dropZone.classList.remove('dragover'));

    dropZone.addEventListener('drop', (e) => {
      e.preventDefault();
      dropZone.classList.remove('dragover');
      const files = e.dataTransfer.files;
      if (files.length > 0) {
        fileInput.files = files;
        handleFileSelect();
      }
    });

    function handleFileSelect() {
      const file = fileInput.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = (e) => {
          preview.src = e.target.result;
          fileName.textContent = `Selected: ${file.name}`;
          previewContainer.style.display = 'block';
          submitBtn.disabled = false;
        };
        reader.readAsDataURL(file);
      }
    }
  </script>
</body>
</html>
